# File: mosquitto.conf
#
# Obiettivo
# ---------
# Configurare il broker MQTT (Eclipse Mosquitto) utilizzato nell’Urban Monitoring MAS,
# definendo:
# - listener e porta di ascolto;
# - modalità di autenticazione (anonima, per scopi di laboratorio);
# - persistenza dello stato del broker su disco;
# - logging verso stdout per integrazione con l’ambiente containerizzato.
#
# Ruolo nel sistema
# -----------------
# Il broker MQTT rappresenta il backbone di comunicazione publish/subscribe tra i componenti
# dell’architettura:
# - `sim-sensors`: pubblica eventi sui topic MQTT;
# - `mas-core`: sottoscrive eventi, elabora lo stato e coordina azioni;
# - eventuali client esterni (debug/monitoring) collegati tramite la porta esposta da Compose.
#
# Note di implementazione
# -----------------------
# - La configurazione è mirata a un contesto di sviluppo/demo in Docker.
# - In produzione sono necessari hardening e controlli (autenticazione, ACL, TLS, listener dedicati).
# - `persistence_location` punta a una directory montata su volume, così da preservare lo stato
#   anche tra riavvii del container.

# Porta di ascolto TCP del broker MQTT.
# In questo progetto i client (simulatori, MAS, ecc.) si collegano a:
#   mqtt://<host-broker>:1883
listener 1883

# Abilita connessioni anonime (senza username/password).
# Scelta adatta a scenari didattici / di test in ambiente controllato.
# In un deploy reale andrebbero configurati utenti, password e ACL.
allow_anonymous true

# Abilita la persistenza interna di Mosquitto, così che lo stato (retain,
# eventuali queue per client con QoS>0, ecc.) venga serializzato su disco.
persistence true

# Directory in cui Mosquitto salva i file di persistenza.
# Nel setup Docker questa path è montata su volume per mantenere i dati
# anche tra riavvii del container.
persistence_location /mosquitto/data/

# Destinazione dei log: stdout, così che il logging sia visibile nei log del
# container Docker (`docker logs`) e integrabile con sistemi di observability.
log_dest stdout

# Tipologie di log abilitate:
# - error: errori di funzionamento del broker;
# - warning: situazioni anomale ma non critiche;
# - notice: eventi informativi di rilievo (connessioni, disconnessioni, ecc.);
# - information: log informativi più dettagliati.
log_type error
log_type warning
log_type notice
log_type information
